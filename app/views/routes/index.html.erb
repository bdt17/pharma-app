<h1>Routes</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Truck</th>
    <th>Stops</th>
    <th>Status</th>
    <th>Progress</th>
    <th>Distance</th>
    <th>Est. Duration</th>
    <th>Actions</th>
  </tr>
  <% @routes.each do |route| %>
    <tr>
      <td><%= link_to route.name, route_path(route) %></td>
      <td><%= route.truck&.name || "-" %></td>
      <td><%= route.total_stops %></td>
      <td>
        <span class="status-badge status-<%= route.status || 'draft' %>">
          <%= (route.status || 'draft').upcase %>
        </span>
      </td>
      <td>
        <% if route.total_stops > 0 %>
          <%= route.progress_percentage %>%
        <% else %>
          -
        <% end %>
      </td>
      <td><%= route.distance ? "#{route.distance.round(1)} km" : "-" %></td>
      <td><%= route.estimated_duration ? "#{route.estimated_duration} min" : "-" %></td>
      <td>
        <%= link_to "View", route_path(route) %> |
        <%= link_to "Edit", edit_route_path(route) %> |
        <%= button_to "Delete", route_path(route), method: :delete, data: { turbo_confirm: "Delete this route?" } %>
      </td>
    </tr>
  <% end %>
</table>

<p><%= link_to "New Route", new_route_path %></p>

<style>
  .status-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 12px;
  }
  .status-draft { background: #6c757d; color: white; }
  .status-planned { background: #17a2b8; color: white; }
  .status-in_progress { background: #007bff; color: white; }
  .status-completed { background: #28a745; color: white; }
  .status-cancelled { background: #dc3545; color: white; }
</style>
