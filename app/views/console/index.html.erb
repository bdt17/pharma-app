<h1>Live Monitoring Console</h1>

<div class="console-stats" id="live-stats">
  <div class="stat-card">
    <div class="stat-value" id="total-trucks"><%= @trucks.count %></div>
    <div class="stat-label">Total Trucks</div>
  </div>
  <div class="stat-card stat-success">
    <div class="stat-value" id="trucks-ok"><%= @trucks.count - @recent_alerts.count %></div>
    <div class="stat-label">In Range</div>
  </div>
  <div class="stat-card stat-danger">
    <div class="stat-value" id="trucks-alert"><%= @recent_alerts.count %></div>
    <div class="stat-label">Out of Range</div>
  </div>
  <div class="stat-card stat-warning">
    <div class="stat-value" id="high-risk"><%= @trucks.where(risk_level: ['high', 'critical']).count %></div>
    <div class="stat-label">High Risk</div>
  </div>
  <div class="stat-card stat-info">
    <div class="stat-value" id="active-routes"><%= @active_routes.count %></div>
    <div class="stat-label">Active Routes</div>
  </div>
  <div class="stat-card <%= @early_warnings.any? ? 'stat-danger' : 'stat-success' %>">
    <div class="stat-value" id="early-warnings-count"><%= @early_warnings.count %></div>
    <div class="stat-label">Early Warnings</div>
  </div>
</div>

<div class="console-grid">
  <div class="console-panel">
    <h2>Active Alerts <span class="badge" id="alert-count"><%= @recent_alerts.count %></span></h2>
    <div id="alerts-container">
      <% if @recent_alerts.any? %>
        <% @recent_alerts.each do |alert| %>
          <div class="alert-item alert-<%= alert[:type] %>">
            <div class="alert-header">
              <strong><%= alert[:truck_name] %></strong>
              <span class="alert-time"><%= alert[:recorded_at]&.strftime("%H:%M:%S") %></span>
            </div>
            <div class="alert-body">
              <% if alert[:type] == 'power_failure' %>
                Power failure detected
              <% else %>
                Temp: <%= alert[:temperature] %>&deg;C
                (Range: <%= alert[:min_temp] || '-' %> - <%= alert[:max_temp] || '-' %>&deg;C)
              <% end %>
            </div>
            <div class="alert-footer">
              Site: <%= alert[:site_name] %>
              <% if alert[:risk_level] %>
                | Risk: <span class="risk-<%= alert[:risk_level] %>"><%= alert[:risk_level]&.upcase %></span>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="no-alerts">All trucks operating normally</div>
      <% end %>
    </div>
  </div>

  <div class="console-panel">
    <h2>Fleet Status</h2>
    <div id="trucks-container">
      <table class="trucks-table">
        <thead>
          <tr>
            <th>Truck</th>
            <th>Site</th>
            <th>Temp</th>
            <th>Location</th>
            <th>Speed</th>
            <th>Risk</th>
            <th>Last Update</th>
          </tr>
        </thead>
        <tbody>
          <% @trucks.each do |truck| %>
            <% last_telemetry = truck.telemetry_readings.order(recorded_at: :desc).first %>
            <% last_monitoring = truck.monitorings.order(recorded_at: :desc).first %>
            <% temp = last_telemetry&.temperature_c || last_monitoring&.temperature %>
            <% out_of_range = temp && truck.out_of_range?(temp) %>
            <tr class="<%= out_of_range ? 'row-alert' : '' %>" data-truck-id="<%= truck.id %>">
              <td><%= link_to truck.name, truck_path(truck) %></td>
              <td><%= truck.site&.name || '-' %></td>
              <td class="<%= out_of_range ? 'temp-alert' : '' %>">
                <%= temp ? "#{temp}&deg;C".html_safe : '-' %>
              </td>
              <td class="location-cell">
                <% if last_telemetry&.latitude && last_telemetry&.longitude %>
                  <span class="coords" title="<%= last_telemetry.latitude %>, <%= last_telemetry.longitude %>">
                    <%= sprintf("%.4f", last_telemetry.latitude) %>,
                    <%= sprintf("%.4f", last_telemetry.longitude) %>
                  </span>
                <% else %>
                  -
                <% end %>
              </td>
              <td>
                <% if last_telemetry&.speed_kph %>
                  <%= last_telemetry.speed_kph.round %> km/h
                <% else %>
                  -
                <% end %>
              </td>
              <td>
                <% if truck.risk_level %>
                  <span class="risk-badge risk-<%= truck.risk_level %>"><%= truck.risk_level.upcase %></span>
                <% else %>
                  -
                <% end %>
              </td>
              <td class="time-cell">
                <%= (last_telemetry&.recorded_at || last_monitoring&.recorded_at)&.strftime("%H:%M:%S") || '-' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% if @early_warnings.any? %>
<div class="console-panel early-warnings-panel">
  <h2>Predictive Early Warnings <span class="badge"><%= @early_warnings.count %></span></h2>
  <div class="warnings-list" id="early-warnings-container">
    <% @early_warnings.each do |warning| %>
      <div class="warning-item warning-<%= warning[:warning_level] %>">
        <div class="warning-header">
          <strong><%= warning[:route_name] %></strong>
          <span class="warning-level"><%= warning[:warning_level].upcase %></span>
        </div>
        <div class="warning-body">
          <div class="probability-bars">
            <div class="prob-item">
              <span class="prob-label">Excursion Risk:</span>
              <div class="prob-bar">
                <div class="prob-fill prob-danger" style="width: <%= (warning[:forecast][:excursion_probability] * 100).round %>%"></div>
              </div>
              <span class="prob-value"><%= (warning[:forecast][:excursion_probability] * 100).round %>%</span>
            </div>
            <div class="prob-item">
              <span class="prob-label">On-Time:</span>
              <div class="prob-bar">
                <div class="prob-fill prob-success" style="width: <%= (warning[:forecast][:ontime_probability] * 100).round %>%"></div>
              </div>
              <span class="prob-value"><%= (warning[:forecast][:ontime_probability] * 100).round %>%</span>
            </div>
          </div>
          <div class="risk-band">
            Risk Band: <span class="band-<%= warning[:forecast][:risk_band] %>"><%= warning[:forecast][:risk_band_label] %></span>
          </div>
        </div>
        <div class="warning-footer">
          Truck: <%= warning[:truck_name] %>
          <% if warning[:forecast][:recommendations].any? %>
            | Action: <%= warning[:forecast][:recommendations].first[:action] %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
<% end %>

<% if @active_routes.any? %>
<div class="console-panel">
  <h2>Active Routes</h2>
  <div class="routes-grid">
    <% @active_routes.each do |route| %>
      <% forecast = PredictiveRiskEngine.forecast(route) rescue nil %>
      <div class="route-card <%= forecast && forecast[:early_warning] ? 'route-warning' : '' %>">
        <div class="route-header">
          <strong><%= route.name %></strong>
          <span class="route-truck"><%= route.truck&.name %></span>
        </div>
        <div class="route-progress">
          <div class="progress-bar">
            <div class="progress-fill" style="width: <%= route.progress_percentage %>%"></div>
          </div>
          <span class="progress-text"><%= route.completed_stops %>/<%= route.total_stops %> stops</span>
        </div>
        <% if forecast %>
        <div class="route-forecast">
          <span class="forecast-item" title="Excursion probability">Exc: <%= (forecast[:excursion_probability] * 100).round %>%</span>
          <span class="forecast-item" title="On-time probability">OT: <%= (forecast[:ontime_probability] * 100).round %>%</span>
          <span class="band-<%= forecast[:risk_band] %>"><%= forecast[:risk_band_label] %></span>
        </div>
        <% end %>
        <div class="route-footer">
          Started: <%= route.started_at&.strftime("%H:%M") %>
          <% if route.risk_level %>
            | <span class="risk-<%= route.risk_level %>">Risk: <%= route.risk_level.upcase %></span>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
<% end %>

<div class="console-panel">
  <h2>Recent Activity</h2>
  <div class="activity-tabs">
    <button class="tab-btn active" data-tab="telemetry">Telemetry</button>
    <button class="tab-btn" data-tab="events">Events</button>
    <button class="tab-btn" data-tab="readings">Readings</button>
  </div>

  <div id="telemetry-tab" class="tab-content active">
    <table class="readings-table">
      <thead>
        <tr>
          <th>Time</th>
          <th>Truck</th>
          <th>Temp</th>
          <th>Location</th>
          <th>Speed</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @recent_telemetry.each do |reading| %>
          <% out_of_range = reading.out_of_range? %>
          <tr class="<%= out_of_range ? 'row-alert' : '' %>">
            <td><%= reading.recorded_at&.strftime("%H:%M:%S") %></td>
            <td><%= reading.truck&.name %></td>
            <td class="<%= out_of_range ? 'temp-alert' : '' %>">
              <%= reading.temperature_c ? "#{reading.temperature_c}&deg;C".html_safe : '-' %>
            </td>
            <td>
              <% if reading.latitude && reading.longitude %>
                <%= sprintf("%.4f", reading.latitude) %>, <%= sprintf("%.4f", reading.longitude) %>
              <% else %>
                -
              <% end %>
            </td>
            <td><%= reading.speed_kph ? "#{reading.speed_kph.round} km/h" : '-' %></td>
            <td>
              <span class="<%= out_of_range ? 'status-excursion' : 'status-ok' %>">
                <%= out_of_range ? 'EXCURSION' : 'OK' %>
              </span>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div id="events-tab" class="tab-content">
    <table class="readings-table">
      <thead>
        <tr>
          <th>Time</th>
          <th>Truck</th>
          <th>Event</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <% @recent_events.each do |event| %>
          <tr>
            <td><%= event.recorded_at&.strftime("%H:%M:%S") %></td>
            <td><%= event.truck&.name %></td>
            <td><span class="event-type"><%= event.event_type.humanize %></span></td>
            <td><%= event.description || '-' %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div id="readings-tab" class="tab-content">
    <table class="readings-table">
      <thead>
        <tr>
          <th>Time</th>
          <th>Truck</th>
          <th>Temperature</th>
          <th>Power</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @recent_monitorings.first(20).each do |monitoring| %>
          <% out_of_range = monitoring.truck&.out_of_range?(monitoring.temperature) %>
          <tr class="<%= out_of_range ? 'row-alert' : '' %>">
            <td><%= monitoring.recorded_at&.strftime("%H:%M:%S") %></td>
            <td><%= monitoring.truck&.name %></td>
            <td class="<%= out_of_range ? 'temp-alert' : '' %>">
              <%= monitoring.temperature %>&deg;C
            </td>
            <td class="<%= monitoring.power_status == 'off' ? 'power-off' : '' %>">
              <%= monitoring.power_status %>
            </td>
            <td>
              <span class="<%= out_of_range ? 'status-excursion' : 'status-ok' %>">
                <%= out_of_range ? 'EXCURSION' : 'OK' %>
              </span>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<p style="margin-top: 20px;">
  <%= link_to "Back to Dashboard", root_path %> |
  <%= link_to "View Analytics", analytics_path %>
</p>

<script>
  // Tab switching
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      this.classList.add('active');
      document.getElementById(this.dataset.tab + '-tab').classList.add('active');
    });
  });

  // Auto-refresh stats every 30 seconds
  setInterval(function() {
    fetch('/console/live_data')
      .then(response => response.json())
      .then(data => {
        document.getElementById('total-trucks').textContent = data.stats.total_trucks;
        document.getElementById('trucks-ok').textContent = data.stats.trucks_in_range;
        document.getElementById('trucks-alert').textContent = data.stats.trucks_out_of_range;
        document.getElementById('high-risk').textContent = data.stats.high_risk_trucks;
        document.getElementById('alert-count').textContent = data.stats.active_alerts;
      })
      .catch(err => console.log('Refresh error:', err));
  }, 30000);

  // Real-time updates via Action Cable
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof App !== 'undefined' && App.cable) {
      App.cable.subscriptions.create("ConsoleChannel", {
        received: function(data) {
          if (data.type === 'telemetry') {
            updateTruckRow(data);
            addTelemetryReading(data);
          } else if (data.type === 'alert') {
            addAlert(data);
            playAlertSound();
          } else if (data.type === 'shipment_event') {
            addShipmentEvent(data);
          }
        }
      });
    }
  });

  function updateTruckRow(data) {
    const row = document.querySelector('tr[data-truck-id="' + data.truck_id + '"]');
    if (!row) return;

    const cells = row.querySelectorAll('td');
    if (data.temperature_c !== null) {
      cells[2].innerHTML = data.temperature_c + '&deg;C';
      if (data.out_of_range) {
        cells[2].classList.add('temp-alert');
        row.classList.add('row-alert');
      } else {
        cells[2].classList.remove('temp-alert');
        row.classList.remove('row-alert');
      }
    }
    if (data.latitude && data.longitude) {
      cells[3].innerHTML = '<span class="coords">' +
        parseFloat(data.latitude).toFixed(4) + ', ' +
        parseFloat(data.longitude).toFixed(4) + '</span>';
    }
    if (data.speed_kph !== null) {
      cells[4].textContent = Math.round(data.speed_kph) + ' km/h';
    }
    cells[6].textContent = new Date(data.recorded_at).toLocaleTimeString();
  }

  function addTelemetryReading(data) {
    const tbody = document.querySelector('#telemetry-tab tbody');
    if (!tbody) return;

    const row = document.createElement('tr');
    if (data.out_of_range) row.classList.add('row-alert');

    row.innerHTML = `
      <td>${new Date(data.recorded_at).toLocaleTimeString()}</td>
      <td>${data.truck_name}</td>
      <td class="${data.out_of_range ? 'temp-alert' : ''}">${data.temperature_c !== null ? data.temperature_c + '&deg;C' : '-'}</td>
      <td>${data.latitude && data.longitude ? parseFloat(data.latitude).toFixed(4) + ', ' + parseFloat(data.longitude).toFixed(4) : '-'}</td>
      <td>${data.speed_kph !== null ? Math.round(data.speed_kph) + ' km/h' : '-'}</td>
      <td><span class="${data.out_of_range ? 'status-excursion' : 'status-ok'}">${data.out_of_range ? 'EXCURSION' : 'OK'}</span></td>
    `;

    tbody.insertBefore(row, tbody.firstChild);
    if (tbody.children.length > 20) {
      tbody.removeChild(tbody.lastChild);
    }
  }

  function addAlert(data) {
    const container = document.getElementById('alerts-container');
    if (!container) return;

    const noAlerts = container.querySelector('.no-alerts');
    if (noAlerts) noAlerts.remove();

    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert-item alert-' + data.alert_type;
    alertDiv.innerHTML = `
      <div class="alert-header">
        <strong>${data.truck_name}</strong>
        <span class="alert-time">${new Date(data.recorded_at).toLocaleTimeString()}</span>
      </div>
      <div class="alert-body">
        Temp: ${data.temperature_c}&deg;C (Range: ${data.min_temp || '-'} - ${data.max_temp || '-'}&deg;C)
      </div>
      <div class="alert-footer">
        Site: ${data.site_name || '-'}
        ${data.risk_level ? '| Risk: <span class="risk-' + data.risk_level + '">' + data.risk_level.toUpperCase() + '</span>' : ''}
      </div>
    `;

    container.insertBefore(alertDiv, container.firstChild);

    const alertCount = document.getElementById('trucks-alert');
    if (alertCount) {
      alertCount.textContent = parseInt(alertCount.textContent) + 1;
    }
    const badge = document.getElementById('alert-count');
    if (badge) {
      badge.textContent = parseInt(badge.textContent) + 1;
    }
  }

  function addShipmentEvent(data) {
    const tbody = document.querySelector('#events-tab tbody');
    if (!tbody) return;

    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${new Date(data.recorded_at).toLocaleTimeString()}</td>
      <td>${data.truck_name}</td>
      <td><span class="event-type">${data.event_type.replace(/_/g, ' ')}</span></td>
      <td>${data.description || '-'}</td>
    `;

    tbody.insertBefore(row, tbody.firstChild);
    if (tbody.children.length > 10) {
      tbody.removeChild(tbody.lastChild);
    }
  }

  function playAlertSound() {
    try {
      const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJaRloy1qLm4w8/Ex93c5Ofo8/Lz9/b3+fj5+fn6+vr6+vr6+vr6+vn5+fn5+Pj39/b29fT08vHw7+7t7Ovq6efl5OLg3t3b2dfV09HQzsvJx8XDwcC+vLu5uLa1tLKxsK6trKuqqainom==');
      audio.volume = 0.3;
      audio.play().catch(function() {});
    } catch(e) {}
  }
</script>

<style>
  .console-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
  }
  .stat-card {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
  }
  .stat-card.stat-success { background: #d4edda; border-color: #28a745; }
  .stat-card.stat-danger { background: #f8d7da; border-color: #dc3545; }
  .stat-card.stat-warning { background: #fff3cd; border-color: #ffc107; }
  .stat-card.stat-info { background: #d1ecf1; border-color: #17a2b8; }
  .stat-value { font-size: 32px; font-weight: bold; }
  .stat-label { font-size: 13px; color: #666; }

  .console-grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 20px;
    margin-bottom: 20px;
  }
  .console-panel {
    background: #fff;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
  }
  .console-panel h2 {
    margin-top: 0;
    font-size: 16px;
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .badge {
    background: #dc3545;
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 12px;
  }

  .alert-item {
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 4px;
    border-left: 4px solid #dc3545;
    background: #f8d7da;
  }
  .alert-item.alert-critical { border-color: #721c24; background: #f5c6cb; }
  .alert-item.alert-high { border-color: #dc3545; }
  .alert-item.alert-too_cold { border-color: #17a2b8; background: #d1ecf1; }
  .alert-item.alert-too_hot { border-color: #fd7e14; background: #fff3cd; }
  .alert-item.alert-power_failure { border-color: #6c757d; background: #e2e3e5; }
  .alert-header { display: flex; justify-content: space-between; font-size: 14px; }
  .alert-time { color: #666; font-size: 12px; }
  .alert-body { margin: 5px 0; font-size: 13px; }
  .alert-footer { font-size: 11px; color: #666; }
  .no-alerts { color: #28a745; padding: 20px; text-align: center; }

  .trucks-table, .readings-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
  }
  .trucks-table th, .trucks-table td,
  .readings-table th, .readings-table td {
    padding: 6px 8px;
    border: 1px solid #dee2e6;
    text-align: left;
  }
  .trucks-table th, .readings-table th { background: #f8f9fa; font-weight: 600; }
  .row-alert { background: #f8d7da; }
  .temp-alert { color: #dc3545; font-weight: bold; }
  .power-off { color: #6c757d; font-weight: bold; }
  .location-cell { font-family: monospace; font-size: 11px; }
  .time-cell { white-space: nowrap; }

  .risk-badge {
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    font-weight: bold;
  }
  .risk-low { background: #28a745; color: white; }
  .risk-medium { background: #ffc107; color: black; }
  .risk-high { background: #fd7e14; color: white; }
  .risk-critical { background: #dc3545; color: white; }

  .status-excursion { background: #dc3545; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; }
  .status-ok { background: #28a745; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; }

  .routes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
  }
  .route-card {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    padding: 12px;
  }
  .route-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  .route-truck { color: #666; font-size: 12px; }
  .route-progress { margin: 10px 0; }
  .progress-bar, .prob-bar {
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: #28a745;
    transition: width 0.3s ease;
  }
  .progress-text { font-size: 11px; color: #666; }
  .route-card.route-warning { border: 2px solid #dc3545; background: #fff5f5; }
  .route-forecast { font-size: 11px; margin: 8px 0; display: flex; gap: 10px; align-items: center; }
  .forecast-item { background: #e9ecef; padding: 2px 6px; border-radius: 3px; }

  .early-warnings-panel { border-color: #dc3545; }
  .warning-item {
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 6px;
    border-left: 4px solid #dc3545;
    background: #fff5f5;
  }
  .warning-item.warning-critical { border-color: #721c24; background: #f8d7da; }
  .warning-item.warning-elevated { border-color: #fd7e14; background: #fff3cd; }
  .warning-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
  .warning-level { font-size: 10px; font-weight: bold; padding: 2px 8px; border-radius: 3px; background: #dc3545; color: white; }
  .warning-body { margin: 10px 0; }
  .warning-footer { font-size: 11px; color: #666; }

  .probability-bars { margin: 10px 0; }
  .prob-item { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
  .prob-label { font-size: 11px; width: 100px; }
  .prob-bar { flex: 1; max-width: 150px; }
  .prob-fill { height: 100%; transition: width 0.3s ease; }
  .prob-fill.prob-danger { background: #dc3545; }
  .prob-fill.prob-success { background: #28a745; }
  .prob-value { font-size: 11px; font-weight: bold; width: 40px; }

  .risk-band { font-size: 12px; margin-top: 8px; }
  .band-low { background: #28a745; color: white; padding: 2px 8px; border-radius: 3px; font-size: 10px; }
  .band-medium { background: #ffc107; color: black; padding: 2px 8px; border-radius: 3px; font-size: 10px; }
  .band-high { background: #dc3545; color: white; padding: 2px 8px; border-radius: 3px; font-size: 10px; }
  .route-footer { font-size: 11px; color: #666; margin-top: 8px; }

  .activity-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 15px;
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 10px;
  }
  .tab-btn {
    padding: 6px 12px;
    border: 1px solid #dee2e6;
    background: #f8f9fa;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
  }
  .tab-btn.active {
    background: #007bff;
    color: white;
    border-color: #007bff;
  }
  .tab-content { display: none; }
  .tab-content.active { display: block; }

  .event-type {
    background: #e9ecef;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 11px;
    text-transform: capitalize;
  }

  @media (max-width: 768px) {
    .console-grid { grid-template-columns: 1fr; }
    .console-stats { grid-template-columns: repeat(2, 1fr); }
  }
</style>
