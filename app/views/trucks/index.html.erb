<h1>Your Trucks</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Site</th>
    <th>Status</th>
    <th>Risk Level</th>
    <th>Risk Score</th>
    <th>Actions</th>
  </tr>
  <% @trucks.each do |truck| %>
    <tr>
      <td><%= link_to truck.name, truck_path(truck) %></td>
      <td><%= truck.site ? link_to(truck.site.name, site_path(truck.site)) : "-" %></td>
      <td><%= truck.status.presence || "OK" %></td>
      <td>
        <% if truck.risk_level.present? %>
          <span class="risk-badge risk-<%= truck.risk_level %>">
            <%= truck.risk_level.upcase %>
          </span>
        <% else %>
          <span class="risk-badge risk-unknown">N/A</span>
        <% end %>
      </td>
      <td><%= truck.risk_score&.round || "-" %></td>
      <td>
        <%= link_to "Edit", edit_truck_path(truck) %> |
        <%= button_to "Send test alert",
                      send_test_alert_truck_path(truck),
                      method: :post %>
        <%= button_to "Delete",
                      truck_path(truck),
                      method: :delete,
                      data: { turbo_confirm: "Delete this truck?" } %>
      </td>
    </tr>
  <% end %>
</table>

<p><%= link_to "New truck", new_truck_path %></p>

<style>
  .risk-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 12px;
  }
  .risk-low { background: #28a745; color: white; }
  .risk-medium { background: #ffc107; color: black; }
  .risk-high { background: #fd7e14; color: white; }
  .risk-critical { background: #dc3545; color: white; }
  .risk-unknown { background: #6c757d; color: white; }
</style>
